[
  {
    "jobType": "archive",
    "create": {
      "actions": {
        "actionType": "log"
      }
    },
    "update": {
      "auth": "#all",
      "actions": {
        "actionType": "log"
      }
    },
    "post": {
      "actions": [
        {
          "actionType": "email",
          "mailer": {
            "host": "smtp.myinstitution.ext",
            "port": 465,
            "secure": true,
            "auth": {
              "user": "scicatuser",
              "pass": ""
            }
          },
          "to": "{{ join job.recipients ' '}}",
          "from": "scicat@example.com",
          "subject": "Archive job {{job.pid}} has completed.",
          "body": "Dear {{job.owner}},\n\nArchive job {{job.pid}} has completed. Results: {{job.status}}\n"
        },
        {
          "actionType": "filter",
          "filter": {
            "status": "SUCCESSFUL"
          },
          "actions": [
            {
              "actionType": "url",
              "url": "myscicat.myinstitution.ext/datablock/archived",
              "verb": "post",
              "headers": {
                "AuthBearer": "{{secrets.jwt_token}}"
              },
              "body": "{ structure to create archive files }"
            }
          ]
        }
      ]
    }
  }
]
