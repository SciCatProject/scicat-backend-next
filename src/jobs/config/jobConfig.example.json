{
  "configVersion": "v1.0 2024-03-01 6f3f38",
  "jobs": [
    {
      "jobType": "archive",
      "create": {
        "auth": "#all",
        "actions": [
          {
            "actionType": "log"
          },
          {
            "actionType": "url",
            "url": "http://localhost:3000/api/v3/health?jobid={{id}}",
            "headers": {
              "accept": "application/json"
            }
          },
          {
            "actionType": "rabbitmq",
            "hostname": "rabbitmq",
            "port": 5672,
            "username": "guest",
            "password": "guest",
            "exchange": "jobs.write",
            "queue": "client.jobs.write",
            "key": "jobqueue"
          },
          {
            "actionType": "email",
            "auth": {
              "user": "user",
              "password": "password"
            },
            "to": "{{contactEmail}}",
            "from": "from",
            "subject": "[SciCat] Your {{type}} job was submitted successfully",
            "bodyTemplateFile": "src/common/email-templates/job-template-simplified.html"
          }
        ]
      },
      "statusUpdate": {
        "auth": "archivemanager",
        "actions": [
          {
            "actionType": "rabbitmq",
            "hostname": "rabbitmq",
            "port": 5672,
            "username": "guest",
            "password": "guest",
            "exchange": "jobs.write",
            "queue": "client.jobs.write",
            "key": "jobqueue"
          }
        ]
      }
    },
    {
      "jobType": "public",
      "create": {
        "auth": "#all",
        "actions": [
          {
            "actionType": "validate",
            "request": {
              "jobParams.datasetList[*]": {
                "type": "object",
                "required": ["pid","files"]
              }
            }
          }
        ]
      },
      "statusUpdate": {
        "auth": "#all"
      }
    }
  ]
}
